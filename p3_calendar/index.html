<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>project3 달력</title>
<style>
    #calendar_wrap{
        width: 350px;
        background: #333;
        text-align: center;
    }
    caption{
        padding: 10px;
        font-size: 1.5em;
        color: orange;
    }
    table,th,td{
        color: white;
        border: 1px solid #666;
        border-collapse: collapse;
    }
    th,td{
        width: 30px;
        padding: 10px;
    }
    th:first-child, td:first-child {
       color: red;
    }
    #prev, #next {
        display: inline-block;
        padding: 5px;
        text-decoration: none;
        color: white;
    }
</style>
</head>
<body>
<div id="calendar_wrap">
    <table id="calendar">
    <caption>
        <span class="year"></span>년
        <span class="month"></span>월
    </caption>
    <tr>
        <th>일</th><th>월</th><th>화</th><th>수</th>
        <th>목</th><th>금</th><th>토</th>
    </tr>
    <tr>
        <td>&nbsp;</td><td>&nbsp;</td>
        <td>&nbsp;</td><td>&nbsp;</td>
        <td>&nbsp;</td><td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    </table>
    <a href="#" id="prev">이전달</a>
    <a href="#" id="next">다음달</a>
</div>
<script>
    // calendar 함수
    function calendar(new_year, new_month){
        // 특정 年月을 시작일부터 조회(year, month, date)
        var	d = new Date(new_year, new_month-1, 1),
                // 월별 일수 구하기
                d_length = 32 - new Date(new_year, new_month-1, 32).getDate(),
                year = d.getFullYear(),
                month = d.getMonth(),
                date = d.getDate(),
                day = d.getDay();
        // caption 영역 날짜 표시 객체
        var caption_year = document.querySelector('.year'),
            caption_month = document.querySelector('.month');
        var start_day = document.querySelectorAll('tr td');
        // 테이블 초기화
        for(var i = 0; i < start_day.length; i++){
            start_day[i].innerHTML = '&nbsp;';
        }
        // jQuery로 하면 (each()메서드: 해당 객체(배열) 길이만큼 자동 반복)
        // $start_day.each(function(i){
        //     $(this).html('&nbsp;');
        // });
        // 한달치 날짜를 테이블에 시작 요일부터 순서대로 표시
        for(var i = day; i < day + d_length; i++){
            start_day[i].innerHTML = date;
            date++;
        }
        // caption 날짜 표시
        caption_year.innerHTML = year;
        caption_month.innerHTML = month + 1;
    }
    // 즉시 실행 함수 (js에는 main함수 따로 존재 x, 변수가 전역으로 선언안되서 프로그램 메모리 관리에 효율적)
    (function(){
        var prev = document.getElementById('prev'),
                next = document.getElementById('next'),
                year = new Date().getFullYear(),
                month = new Date().getMonth() + 1; // 월은 + 1

        calendar(year, month);
        prev.onclick = function(){
            calendar(year, --month);
            console.log(month);
        };
        next.onclick = function(){
            calendar(year, ++month);
            console.log(month);
        };
    })();
</script>
</body>
</html>